<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
<script type="text/javascript" src="scripts/soundcloud.player.api.js"></script>
    <script src="http://connect.soundcloud.com/sdk.js"></script>
    <script type="text/javascript" src='{{ url_for('static', filename='js/scripts.js') }}'></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>

<script type="text/javascript" src="scripts/soundcloud.player.api.js"></script>

    <script type="text/javascript">
     // soundcloud.debug = true;
$('#musicSearch').submit(function (){
        var userSearch = $("#musicInput").val();

  (function(){
    var widgetIframe = document.getElementById('sc-widget'),
        widget       = SC.Widget(widgetIframe),
        newSoundUrl = 'http://api.soundcloud.com/tracks/'+userSearch+'&autoplay=true';

    widget.bind(SC.Widget.Events.READY, function() {
      // load new widget
      widget.bind(SC.Widget.Events.FINISH, function() {
        widget.load(newSoundUrl {
        });
      });
    });

  }());
    return false;
});


// </script>

<script type="text/javascript" src='http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'>
    
    $(document).ready(function() {
        
        SC.initialize({
                    client_id: '9812d36e4b4576afc3dfa4e5beeee407'
                  });

         $('#search').submit(function (){
          console.log(current)
       var userSearch = $("#musicInput").val();
       if (current == userSearch) {
        return;
       }
       else{
                console.log(userSearch)
           songs = SC.get('/tracks', { genres: userSearch }, function(tracks) {
             $(tracks).each(function(index, track) {
               console.log(track.title, track.genre, track.bpm)  ;
             });

             console.log("NOW FOR THE")
             SC.get('/tracks/'+userSearch, function(track) {
               SC.oEmbed(track.permalink_url, {auto_play: true},
                document.getElementById('player'));
       });
       });



};
           var current = $("#musicInput").val()
           console.log('ayeeeeeeeeeeeeee')
        return false;
});
        
    });
    </script>
    </head>
    
    <body>
        <nav>
    <div class="nav-wrapper z-depth-3" id="gifSearch">
      <form id="search">
        <div class="input-field z-depth-3">
          <input id="musicInput" type="search" required class="green darken-2" placeholder="Music">
          <input id="giphysearch" type="search" required class="green darken-2" Placeholder="Gifs">

          <label for="search"><i class="material-icons"></i></label>
          <i class="material-icons">close</i>
        </div>
          <button class="btn waves-effect waves-light right z-depth-3" type="submit" name="action">Search
    <i class="material-icons right"></i>
  </button>
      </form>
    </div>
  </nav>

        
        
<div class="row testIt" id="player">

                <iframe id="sc-widget" width="100%" height="100" scrolling="no" class="testIt" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%&show_artwork=true&autoplay=true" id="scPlayer"></iframe>
<script src="https://w.soundcloud.com/player/api.js" type="text/javascript">
    
    
    </script>

  </div>
        </body>
          
</html>